<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Finish Goods Form</title>
  <link rel="icon" type="image/png" href="https://cs.mavellair.com/view/img/mavell_flogo.png">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <link rel="stylesheet" href="../plugins/fontawesome-free/css/all.min.css">
  <link rel="stylesheet" href="../view/css/adminlte.min.css">
  <link rel="stylesheet" href="../view/css/backend.css">
  <link rel="stylesheet" href="../plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css">
  <link rel="stylesheet" href="../plugins/datatables-bs4/css/dataTables.bootstrap4.min.css">
  <link rel="stylesheet" href="../plugins/datatables-responsive/css/responsive.bootstrap4.min.css">
  <link rel="stylesheet" href="../plugins/datatables-buttons/css/buttons.bootstrap4.min.css">
  <link rel="stylesheet" href="../plugins/select2/css/select2.min.css">
  <link rel="stylesheet" href="../plugins/select2-bootstrap4-theme/select2-bootstrap4.min.css">
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-5E4BDH64TF"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-5E4BDH64TF');
  </script>
</head>
<body class="hold-transition sidebar-mini">
  <div class="hide do-print">
    <div class="box box-solid">
      <div class="box-body text-center">
        <h3 class="box-title" data-i18n="issue">Serial Number</h3>
        -------------<span id="print_title"></span>----------------
        <div id="inv_result"></div>
      </div>
    </div><!-- /.box -->
  </div>
  <div class="wrapper non-print">
  <!-- Navbar -->
  <nav class="main-header navbar navbar-expand navbar-white navbar-light">
    <!-- Left navbar links -->
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
      </li>
      <li class="nav-item d-none d-sm-inline-block">
        <a href="welcome.html" class="nav-link">Home</a>
      </li>
    </ul>

    <!-- SEARCH FORM -->
    <form class="form-inline ml-3">
      <div class="input-group input-group-sm">
        <input class="form-control form-control-navbar" type="search" placeholder="Search" aria-label="Search">
        <div class="input-group-append">
          <button class="btn btn-navbar" type="submit">
            <i class="fas fa-search"></i>
          </button>
        </div>
      </div>
    </form>


  </nav>
  <!-- /.navbar -->

  <!-- Main Sidebar Container -->
  <aside class="main-sidebar sidebar-dark-primary elevation-4">
    <!-- Brand Logo -->
    <a href="welcome.html" class="brand-link">
      <img src="../view/img/mavell_slogo.png" alt="Mavell Logo" class="brand-image img-circle elevation-3" style="opacity: .8">
      <span class="brand-text font-weight-light">Hi Mavell</span>
    </a>

    <!-- Sidebar -->
    <div class="sidebar">
      <!-- Sidebar user panel (optional) -->
      <div class="user-panel mt-3 pb-3 mb-3 d-flex">
        <div class="image">
          <img src="../view/img/mavell_flogo.png" class="img-circle elevation-2" alt="User Image">
        </div>
        <div class="info">
          <a href="profile.html" class="d-block">Administrator</a>
        </div>
      </div>

      <!-- SidebarSearch Form -->
      <div class="form-inline">
        <div class="input-group" data-widget="sidebar-search">
          <input class="form-control form-control-sidebar" type="search" placeholder="Search" aria-label="Search">
          <div class="input-group-append">
            <button class="btn btn-sidebar">
              <i class="fas fa-search fa-fw"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- Sidebar Menu -->
      <nav class="mt-2">
        <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
         <li class="nav-item">
           <a href="../pages/welcome.html" class="nav-link">
             <i class="nav-icon far fa-newspaper"></i>
             <p>ข่าว & หน้าแรก</p>
           </a>
         </li>
         <li class="nav-item">
           <a href="#" class="nav-link">
             <i class="nav-icon fas fa-medal"></i>
             <p>
               Reward สะสมคะแนน
               <i class="right fas fa-angle-left"></i>
             </p>
           </a>
           <ul class="nav nav-treeview">
             <li class="nav-item">
               <a href="../pages/reward.html" class="nav-link">
                 <i class="fas fa-list nav-icon"></i>
                 <p>คำร้องสะสม & ตรวจสอบ</p>
               </a>
             </li>
             <li class="nav-item">
               <a href="../pages/reward_item.html" class="nav-link">
                 <i class="fas fa-gifts nav-icon"></i>
                 <p>สินค้าสำหรับแลก</p>
               </a>
             </li>
             <li class="nav-item">
               <a href="../pages/reward_redeem.html" class="nav-link">
                 <i class="fas fa-list nav-icon"></i>
                 <p>แลกของรางวัล</p>
               </a>
             </li>
             <li class="nav-item">
               <a href="../pages/reward_history.html" class="nav-link">
                 <i class="fas fa-list-alt nav-icon"></i>
                 <p>ประวัติสะสมคะแนน</p>
               </a>
             </li>
           </ul>
         </li>
          <li class="nav-item">
            <a href="#" class="nav-link">
              <i class="nav-icon fas fa-mobile"></i>
              <p>
                Hi Mavell App
                <i class="right fas fa-angle-left"></i>
              </p>
            </a>
            <ul class="nav nav-treeview">
              <li class="nav-item">
                <a href="../pages/dashboard.html" class="nav-link">
                  <i class="fas fa-meteor nav-icon"></i>
                  <p>Dashboard</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="../pages/service_tracking.html" class="nav-link">
                  <i class="fas fa-map-marked-alt nav-icon"></i>
                  <p>แผนที่ติดตามสถานะงาน</p>
                </a>
              </li>
            </ul>
          </li>
          <li class="nav-item">
            <a href="../pages/warranty_check.html" class="nav-link">
              <i class="fas fa-pen-square nav-icon"></i>
              <p>ข้อมูลลงทะเบียน</p>
            </a>
          </li>

          <li class="nav-item">
            <a href="../pages/serial.html" class="nav-link">
              <i class="fas fa-list-ol nav-icon"></i>
              <p>ค้นหาหมายเลขผลิตภัณฑ์</p>
            </a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link">
              <i class="nav-icon fas fa-tasks"></i>
              <p>
                ขอรับบริการ
                <i class="right fas fa-angle-left"></i>
              </p>
            </a>
            <ul class="nav nav-treeview">
              <li class="nav-item">
                <a href="../pages/service_dashboard.html" class="nav-link">
                  <i class="fas fa-tachometer-alt nav-icon"></i>
                  <p>Service Dashboard</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="../pages/service_request.html" class="nav-link">
                  <i class="fas fa-search-plus nav-icon"></i>
                  <p>ค้นหารายการคำขอรับ</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="../pages/service_fix.html" class="nav-link">
                  <i class="fas fa-clipboard-list nav-icon"></i>
                  <p>รายการแจ้งซ่อม</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="../pages/service_history.html" class="nav-link">
                  <i class="fas fa-list nav-icon"></i>
                  <p>ประวัติงานเก่า</p>
                </a>
              </li>
            </ul>
          </li>
          <li class="nav-item">
            <a href="../pages/service_pettycash.html" class="nav-link">
              <i class="fas fa-money-bill-alt nav-icon"></i>
              <p>ค่าใช้จ่ายงานบริการ</p>
            </a>
          </li>
          <li class="nav-item">
            <a href="../pages/claim.html" class="nav-link">
              <i class="fas fa-shield-alt nav-icon"></i>
              <p>รายการใบเคลม</p>
            </a>
          </li>
          <li class="nav-item">
            <a href="../pages/part.html" class="nav-link">
              <i class="nav-icon fas fa-puzzle-piece"></i>
              <p>
                รายการข้อมูลอะไหล่
              </p>
            </a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link">
              <i class="nav-icon fas fa-warehouse"></i>
              <p>
                คลังสินค้า
                <i class="fas fa-angle-left right"></i>
              </p>
            </a>
            <ul class="nav nav-treeview">
              <li class="nav-item">
                <a href="../pages/stock_picking.html" class="nav-link">
                  <i class="fas fa-people-carry nav-icon"></i>
                  <p>เบิกของจากคลัง</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="../pages/stock_receive.html" class="nav-link">
                  <i class="fas fa-truck-loading nav-icon"></i>
                  <p>รับ/คืนของเข้าคลัง</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="../pages/return.html" class="nav-link">
                  <i class="nav-icon fas fa-exchange-alt"></i>
                  <p>
                    รายการใบคืนสินค้า
                  </p>
                </a>
              </li>
              <!-- <li class="nav-item">
                <a href="../pages/stock_aging.html" class="nav-link">
                  <i class="fas fa-scroll nav-icon"></i>
                  <p>รายงานอายุสินค้าคงคลัง</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="../pages/stock_card.html" class="nav-link">
                  <i class="fas fa-file-alt nav-icon"></i>
                  <p>รายงานสต็อคการ์ด</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="../pages/report_stock_card.html" class="nav-link">
                  <i class="fas fa-boxes nav-icon"></i>
                  <p>รายงานความเคลื่อนไหวสต็อค</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="../pages/stock_part.html" class="nav-link">
                  <i class="fas fa-box-open nav-icon"></i>
                  <p>รายการอะไหล่คงเหลือ</p>
                </a>
              </li> -->
              <li class="nav-item">
                <a href="../pages/import.html?type=stock_card" class="nav-link">
                  <i class="fas fa-upload nav-icon"></i>
                  <p>อัพโหลดสต๊อค</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="../pages/stock_remain.html" class="nav-link">
                  <i class="fas fa-chart-bar nav-icon"></i>
                  <p>ดูรายการสต๊อคคงเหลือ</p>
                </a>
              </li>
            </ul>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link">
              <i class="nav-icon fas fa-chart-pie"></i>
              <p>
                รายงาน
                <i class="fas fa-angle-left right"></i>
              </p>
            </a>
            <ul class="nav nav-treeview">
              <li class="nav-item">
                <a href="../pages/report_kpi.html" class="nav-link">
                  <i class="fas fa-scroll nav-icon"></i>
                  <p>KPI</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="../pages/report_repair.html" class="nav-link">
                  <i class="fas fa-file-alt nav-icon"></i>
                  <p>Repair Pending</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="../pages/report_schedule.html" class="nav-link">
                  <i class="fas fa-file-alt nav-icon"></i>
                  <p>Schedule</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="../pages/report_service_job.html" class="nav-link">
                  <i class="fas fa-file-alt nav-icon"></i>
                  <p>Service Job</p>
                </a>
              </li>
            </ul>
          </li>
          <li class="nav-item">
            <a href="../pages/sc_list.html" class="nav-link">
              <i class="nav-icon fas fa-building"></i>
              <p>
                ข้อมูลศูนย์บริการ
              </p>
            </a>
          </li>
          <li class="nav-item">
            <a href="../pages/stores.html" class="nav-link">
              <i class="nav-icon fas fa-building"></i>
              <p>ข้อมูลร้านค้าที่ลงทะเบียน</p>
            </a>
          </li>

          <li class="nav-item">
            <a href="../pages/customer.html" class="nav-link">
              <i class="nav-icon fas fa-users"></i>
              <p>
                ลูกค้า
              </p>
            </a>
          </li>

          <li class="nav-item">
            <a href="../pages/technician.html" class="nav-link">
              <i class="nav-icon fas fa-user-cog"></i>
              <p>
                ช่างซ่อม
              </p>
            </a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link">
              <i class="nav-icon fas fa-user-friends"></i>
              <p>
                ผู้ใช้งาน
                <i class="fas fa-angle-left right"></i>
              </p>
            </a>
            <ul class="nav nav-treeview">
              <li class="nav-item">
                <a href="../pages/user.html?r=1" class="nav-link">
                  <i class="far fa-circle nav-icon"></i>
                  <p>ผู้ใช้งานกลุ่มช่าง</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="../pages/user.html?r=0" class="nav-link">
                  <i class="far fa-circle nav-icon"></i>
                  <p>ผู้ใช้งานกลุ่มลูกค้า</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="../pages/user.html?r=2" class="nav-link">
                  <i class="far fa-circle nav-icon"></i>
                  <p>ผู้ใช้งานกลุ่มฝ่ายผลิต</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="../pages/user.html?r=3" class="nav-link">
                  <i class="far fa-circle nav-icon"></i>
                  <p>ผู้ใช้งานกลุ่มฝ่ายคลัง</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="../pages/user.html?r=5" class="nav-link">
                  <i class="far fa-circle nav-icon"></i>
                  <p>ผู้ใช้งานกลุ่มผู้บริหาร</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="../pages/user.html?r=4" class="nav-link">
                  <i class="far fa-circle nav-icon"></i>
                  <p>ผู้ใช้งานกลุ่ม Admin</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="../pages/user_permission.html" class="nav-link">
                  <i class="fas fa-cog nav-icon"></i>
                  <p>ตั้งค่าสิทธิ์การเข้าถึงข้อมูล</p>
                </a>
              </li>
            </ul>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link">
              <i class="nav-icon fas fa-tools"></i>
              <p>
                ข้อมูลพื้นฐาน
                <i class="fas fa-angle-left right"></i>
              </p>
            </a>
            <ul class="nav nav-treeview">
              <li class="nav-item">
                <a href="../pages/product.html" class="nav-link">
                  <i class="fas fa-list-alt nav-icon"></i>
                  <p>Product Models</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="../pages/product_type.html" class="nav-link">
                  <i class="fas fa-list-alt nav-icon"></i>
                  <p>Type Of Product</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="../pages/import.html" class="nav-link">
                  <i class="fas fa-file-import nav-icon"></i>
                  <p>นำเข้าระบบ</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="../pages/policy.html" class="nav-link">
                  <i class="fas fa-gavel nav-icon"></i>
                  <p>จัดการ Policy</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="../pages/news.html" class="nav-link">
                  <i class="fas fa-edit nav-icon"></i>
                  <p>ข่าวมาเวล</p>
                </a>
              </li>
            </ul>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link">
              <i class="nav-icon fas fa-file-signature"></i>
              <p>
                Help Support
                <i class="fas fa-angle-left right"></i>
              </p>
            </a>
            <ul class="nav nav-treeview">
              <li class="nav-item">
                <a href="../pages/rating.html" class="nav-link">
                  <i class="fas fa-file nav-icon"></i>
                  <p>Rating</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="../pages/chat.html" class="nav-link">
                  <i class="fas fa-comment-alt nav-icon"></i>
                  <p>Live Chat</p>
                </a>
              </li>
            </ul>
          </li>
          <li class="nav-item mb-5">
            <a href="javascript:;" class="nav-link signout">
              <i class="nav-icon fas fa-sign-out-alt"></i>
              <p>
                ออกจากระบบ
              </p>
            </a>
          </li>
        </ul>
      </nav>
      <!-- /.sidebar-menu -->
    </div>
    <!-- /.sidebar -->
  </aside>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">

    <!-- Main content -->
    <section class="content">
      <div class="container-fluid">

        <div class="card card-outline card-info mt-3">
          <div class="card-header">
            <h3 class="card-title"><i class="fas fa-boxes"></i> Finish Goods Form</h3>
          </div>
          <!-- /.card-header -->
          <div class="card-header">
            <form id="form_main">
              <div class="row">
                <div class="col-md-2 col-sm-12 col-2">
                  <div class="form-group">
                    <label data-i18n=""><i class="fa fa-star"></i> ยี่ห้อสินค้า :</label>
                    <div class="input-group">
                      <select class="form-control select2" id="brand" name="brand">
                        <option value="Mavell" selected>Mavell</option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="col-md-5 col-sm-12 col-5">
                  <div class="form-group">
                    <label data-i18n=""><i class="fa fa-copyright"></i> รุ่นสินค้า :</label>
                    <div class="input-group">
                      <select class="form-control" id="product_id" name="product_id"></select>
                    </div>
                  </div>
                </div>
                <div class="col-md-1 col-sm-12 col-1">
                  <div class="form-group">
                    <label data-i18n=""><i class="fa fa-sort-amount-down"></i> Lot :</label>
                    <div class="input-group">
                      <input type="text" class="form-control" placeholder="" name="lot_no" id="lot_no">
                    </div>
                  </div>
                </div>
                <div class="col-2 col-md-2 text-left">
                  <label data-i18n="">Line :</label>
                  <div class="form-group">
                    <select class="form-control" id="line" name="line">
                      <option value="INDOOR">INDOOR</option>
                      <option value="OUTDOOR">OUTDOOR</option>
						<option value="SmartGrid">SmartGrid</option>
                    </select>
                  </div>
                </div>
                <div class="col-md-2 col-sm-12 col-2">
                  <div class="form-group">
                    <label>วันที่ผลิต:</label>
                      <div class="input-group date" id="filterMFD" data-target-input="nearest">
                          <input type="text" class="form-control datetimepicker-input" id="mfd" name="mfd" data-target="#filterMFD"/>
                          <div class="input-group-append" data-target="#filterMFD" data-toggle="datetimepicker">
                              <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                          </div>
                      </div>
                  </div>
                </div>
                <div class="col-md-3 col-sm-12 col-3">
                  <div class="form-group">
                    <label data-i18n=""><i class="fa fa-copyright"></i> รุ่นที่บันทึก (ตามที่เลือก) :</label>
                    <div class="input-group">
                      <input type="text" class="form-control" readonly name="model_code_opt" id="model_code_opt">
                    </div>
                  </div>
                </div>
                <div class="col-6 col-md-6 text-left mt-4">
                  <div class="form-group">
                    <button type="button" class="btn btn-success" id="btnHead"><i class="fa fa-file-alt"></i> เริ่มบันทึกรายการ</button>
                    <button type="button" class="btn btn-outline-info" id="btnResetHead">เริ่มใหม่</button>
                  </div>
                </div>
              </div>
              <!-- /.row -->
            </form>
          </div>
          <div class="card-body">
            <h4>ใบรายการ</h4>
            <div class="row">

              <div class="form_indoor col-md-4 col-sm-12 col-6">
                <div class="form-group">
                  <label data-i18n="">Remote S/N :</label>
                  <div class="input-group">
                    <div class="input-group-prepend"><div class="input-group-text"><i class="fa fa-barcode"></i></div></div>
                    <input type="text" class="form-control field-sn" placeholder="คีย์​ S/N และ enter..." id="remote_sn" disabled="true">
                  </div>
                </div>
              </div>

              <div class="form_indoor col-md-4 col-sm-12 col-6">
                <div class="form-group">
                  <label data-i18n="">Product S/N :</label>
                  <div class="input-group">
                    <div class="input-group-prepend"><div class="input-group-text"><i class="fa fa-barcode"></i></div></div>
                    <input type="text" class="form-control field-sn" placeholder="คีย์​ S/N และ enter..." id="model_sn" disabled="true">
                  </div>
                </div>
              </div>

              <div class="form_outdoor col-md-4 col-sm-12 col-6" style="display:none;">
                <div class="form-group">
                  <label data-i18n="">ท่อ S/N :</label>
                  <div class="input-group">
                    <div class="input-group-prepend"><div class="input-group-text"><i class="fa fa-barcode"></i></div></div>
                    <input type="text" class="form-control field-sn" placeholder="คีย์​ S/N และ enter..." id="pipe_sn" disabled="true">
                  </div>
                </div>
              </div>
              <div class="form_outdoor col-md-4 col-sm-12 col-6" style="display:none;">
                <div class="form-group">
                  <label data-i18n="">เทส S/N :</label>
                  <div class="input-group">
                    <div class="input-group-prepend"><div class="input-group-text"><i class="fa fa-barcode"></i></div></div>
                    <input type="text" class="form-control field-sn" placeholder="คีย์​ S/N และ enter..." id="test_sn" disabled="true">
                  </div>
                </div>
              </div>
              <div class="form_outdoor col-md-4 col-sm-12 col-6" style="display:none;">
                <div class="form-group">
                  <label data-i18n="">ใบพัด S/N :</label>
                  <div class="input-group">
                    <div class="input-group-prepend"><div class="input-group-text"><i class="fa fa-barcode"></i></div></div>
                    <input type="text" class="form-control field-sn" placeholder="คีย์​ S/N และ enter..." id="prop_sn" disabled="true">
                  </div>
                </div>
              </div>
              <div class="form_outdoor col-md-4 col-sm-12 col-6" style="display:none;">
                <div class="form-group">
                  <label data-i18n="">ชุดติดตั้ง S/N :</label>
                  <div class="input-group">
                    <div class="input-group-prepend"><div class="input-group-text"><i class="fa fa-barcode"></i></div></div>
                    <input type="text" class="form-control field-sn" placeholder="คีย์​ S/N และ enter..." id="set_sn" disabled="true">
                  </div>
                </div>
              </div>

              <div class="col-md-4 col-sm-12 col-6">
                <div class="form-group">
                  <label data-i18n="">SUP S/N :</label>
                  <div class="input-group">
                    <div class="input-group-prepend"><div class="input-group-text"><i class="fa fa-barcode"></i></div></div>
                    <input type="text" class="form-control field-sn" placeholder="คีย์​ S/N และ enter..." id="sup_sn" disabled="true">
                  </div>
                </div>
              </div>

              <div class="form_indoor col-md-4 col-sm-12 col-6">
                <div class="form-group">
                  <label data-i18n="">Evaporator S/N :</label>
                  <div class="input-group">
                    <div class="input-group-prepend"><div class="input-group-text"><i class="fa fa-barcode"></i></div></div>
                    <input type="text" class="form-control field-sn" placeholder="คีย์​ S/N และ enter..." id="sn_evaporator" disabled="true">
                  </div>
                </div>
              </div>

              <div class="form_indoor col-md-4 col-sm-12 col-6">
                <div class="form-group">
                  <label data-i18n="">Indoor Motor S/N :</label>
                  <div class="input-group">
                    <div class="input-group-prepend"><div class="input-group-text"><i class="fa fa-barcode"></i></div></div>
                    <input type="text" class="form-control field-sn" placeholder="คีย์​ S/N และ enter..." id="sn_motor_indoor" disabled="true">
                  </div>
                </div>
              </div>

              <div class="form_indoor col-md-4 col-sm-12 col-6">
                <div class="form-group">
                  <label data-i18n="">PCB Board S/N :</label>
                  <div class="input-group">
                    <div class="input-group-prepend"><div class="input-group-text"><i class="fa fa-barcode"></i></div></div>
                    <input type="text" class="form-control field-sn" placeholder="คีย์​ S/N และ enter..." id="sn_pcb_indoor" disabled="true">
                  </div>
                </div>
              </div>

              <div class="form_indoor col-md-4 col-sm-12 col-6">
                <div class="form-group">
                  <label data-i18n="">Display assembly S/N :</label>
                  <div class="input-group">
                    <div class="input-group-prepend"><div class="input-group-text"><i class="fa fa-barcode"></i></div></div>
                    <input type="text" class="form-control field-sn" placeholder="คีย์​ S/N และ enter..." id="sn_display_assembly" disabled="true">
                  </div>
                </div>
              </div>

              <div class="form_outdoor col-md-4 col-sm-12 col-6" style="display:none;">
                <div class="form-group">
                  <label data-i18n="">Product S/N :</label>
                  <div class="input-group">
                    <div class="input-group-prepend"><div class="input-group-text"><i class="fa fa-barcode"></i></div></div>
                    <input type="text" class="form-control field-sn" placeholder="คีย์​ S/N และ enter..." id="model_sn2" disabled="true">
                  </div>
                </div>
              </div>

              <div class="form_outdoor col-md-4 col-sm-12 col-6" style="display:none;">
                <div class="form-group">
                  <label data-i18n="">Compressor S/N :</label>
                  <div class="input-group">
                    <div class="input-group-prepend"><div class="input-group-text"><i class="fa fa-barcode"></i></div></div>
                    <input type="text" class="form-control field-sn" placeholder="คีย์​ S/N และ enter..." id="sn_compressor" disabled="true">
                  </div>
                </div>
              </div>

              <div class="form_outdoor col-md-4 col-sm-12 col-6" style="display:none;">
                <div class="form-group">
                  <label data-i18n="">Capacitor Compressor S/N :</label>
                  <div class="input-group">
                    <div class="input-group-prepend"><div class="input-group-text"><i class="fa fa-barcode"></i></div></div>
                    <input type="text" class="form-control field-sn" placeholder="คีย์​ S/N และ enter..." id="sn_capacitor_compressor" disabled="true">
                  </div>
                </div>
              </div>

              <div class="form_outdoor col-md-4 col-sm-12 col-6" style="display:none;">
                <div class="form-group">
                  <label data-i18n="">Magnetic S/N :</label>
                  <div class="input-group">
                    <div class="input-group-prepend"><div class="input-group-text"><i class="fa fa-barcode"></i></div></div>
                    <input type="text" class="form-control field-sn" placeholder="คีย์​ S/N และ enter..." id="sn_magnetic" disabled="true">
                  </div>
                </div>
              </div>

              <div class="form_outdoor col-md-4 col-sm-12 col-6" style="display:none;">
                <div class="form-group">
                  <label data-i18n="">Condenser S/N :</label>
                  <div class="input-group">
                    <div class="input-group-prepend"><div class="input-group-text"><i class="fa fa-barcode"></i></div></div>
                    <input type="text" class="form-control field-sn" placeholder="คีย์​ S/N และ enter..." id="sn_condenser" disabled="true">
                  </div>
                </div>
              </div>

              <div class="form_outdoor col-md-4 col-sm-12 col-6" style="display:none;">
                <div class="form-group">
                  <label data-i18n="">PCB Board S/N :</label>
                  <div class="input-group">
                    <div class="input-group-prepend"><div class="input-group-text"><i class="fa fa-barcode"></i></div></div>
                    <input type="text" class="form-control field-sn" placeholder="คีย์​ S/N และ enter..." id="sn_pcb_outdoor" disabled="true">
                  </div>
                </div>
              </div>

              <div class="form_outdoor col-md-4 col-sm-12 col-6" style="display:none;">
                <div class="form-group">
                  <label data-i18n="">Outdoor Motor S/N :</label>
                  <div class="input-group">
                    <div class="input-group-prepend"><div class="input-group-text"><i class="fa fa-barcode"></i></div></div>
                    <input type="text" class="form-control field-sn" placeholder="คีย์​ S/N และ enter..." id="sn_motor_outdoor" disabled="true">
                  </div>
                </div>
              </div>

              <div class="col-12 mt-4">
                <div class="table-responsive" id="divTable1"></div>

                <div class="form-group">
                  <button type="button" class="btn btn-info btn-block" id="btnSave" disabled="true"><i class="fa fa-spin mr-2"></i>ครบและเริ่มใหม่</button>
                </div>
              </div>
            </div>
            <!-- /.row -->
          </div>
        <!-- /.card -->

      </div><!-- /.container-fluid -->
    </section>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->
  <footer class="main-footer">
    <div class="float-right d-none d-sm-block">
      <b>Version</b> 0.1
    </div>
    <strong>&copy; 2021 Mavell Corporation.</strong> All rights reserved.
  </footer>

  <!-- Control Sidebar -->
  <aside class="control-sidebar control-sidebar-dark">
    <!-- Control sidebar content goes here -->
  </aside>
  <!-- /.control-sidebar -->
</div>
<!-- ./wrapper -->

<script src="../plugins/jquery/jquery.min.js"></script>
<script src="../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="../view/js/adminlte.min.js"></script>
<script src="../plugins/jquery-knob/jquery.knob.min.js"></script>
<script src="../view/js/global.js?v=1" type="text/javascript"></script>
<script src='../plugins/qrcode.js'></script>
<script src="../plugins/moment/moment.min.js"></script>
<script src="../plugins/daterangepicker/daterangepicker.js"></script>
<script src="../plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js"></script>
<script src="../plugins/select2/js/select2.full.min.js"></script>

<script src="../plugins/datatables/jquery.dataTables.min.js"></script>
<script src="../plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
<script src="../plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
<script src="../plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
<script src="../plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
<script src="../plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
<script src="../plugins/jszip/jszip.min.js"></script>
<script src="../plugins/pdfmake/pdfmake.min.js"></script>
<script src="../plugins/pdfmake/vfs_fonts.js?v=1"></script>
<script src="../plugins/datatables-buttons/js/buttons.html5.min.js"></script>
<script src="../plugins/datatables-buttons/js/buttons.print.min.js"></script>
<script src="../plugins/datatables-buttons/js/buttons.colVis.min.js"></script>
<!-- Page script -->
<script>
var ldat = {id: 'new', cur_serial_id : 0, cur_product_inx : -1, groupIdDel : [], active: "INDOOR"};

$($ => {
  "use strict";

  var q = getUrlVars();
  ldat.query = q;
  eb.pageInit();

  // Product Model List
  eb.post("web", "product_model_list", {select : 'fg_form'},
    function(d){
      var tpl='<option value="">(กรุณาเลือกประเภท/รุ่น)</option>';
      for(var i=0; i<d.length; i++){
        tpl+='<option data-inx="'+i+'" value="'+d[i].product_id+'"'+(ldat.cur_product_id && ldat.cur_product_id == d[i].product_id ? ' selected': '')+'>'+eb.snull(d[i].model_name,'')+' : '+eb.snull(d[i].model_code,'')+'</option>';
      }
      $('#product_id,#filter_product_id').html(tpl);

      // Change Model
      $('#product_id').on('change', function(e){
        let i = $("#product_id option:selected").attr('data-inx');
        ldat.cur_product_inx =  i;
        console.info('ldat.cur_product_inx >> '+ i);
        $("#line").trigger('change');
      });
      $('#product_id,#filter_product_id').select2();
      ldat.models = d;
  }); // end post the sc list

  $('.select2').select2();

  //Date range picker
  $('#filterMFD').datetimepicker({
      format: 'DD/MM/YYYY',
      allowInputToggle: true,
      defaultDate: moment()
  });
  // $('#mfd').val(moment().format('DD/MM/YYYY'));


  // Adjust form by LINE
  $("#line").on('change', function (e){
    ldat.active = $(this).val();
    if(ldat.active != 'OUTDOOR'){
      $(".form_outdoor").hide();
      $(".form_indoor").show();
      if(ldat.cur_product_inx > -1 && ldat.models[ldat.cur_product_inx]){
        $('#model_code_opt').val(ldat.models[ldat.cur_product_inx].model_indoor);
      }
    }else {
      $(".form_indoor").hide();
      $(".form_outdoor").show();
      if(ldat.cur_product_inx > -1 && ldat.models[ldat.cur_product_inx]){
        $('#model_code_opt').val(ldat.models[ldat.cur_product_inx].model_outdoor);
      }
    }
  });


  // Lock Head
  $("#btnHead").on('click',function(){
    var q = $('#form_main').serializeObject();
    q.mfd = moment($("#mfd").val(), 'DD/MM/YYYY').format('YYYY-MM-DD');
    console.table(q);
    if(eb.isnt('ยี่ห้อ', q.brand)
      && eb.isnt("รุ่นสินค้า", q.product_id)
      && eb.isnt("Lot Number", q.lot_no)
      && eb.isnt("Line", q.line)
      && eb.isnt('วันที่ผลิต', q.mfd) ) {
        $('#brand,#product_id,#lot_no,#line,#mfd,#btnHead').prop('disabled', true);
        $(".field-sn").prop('disabled', false);
        ldat.set = [];
        if(ldat.active != 'OUTDOOR' ) $("#remote_sn").focus();
        else $("#pipe_sn").focus();
      }
  });

  // 1.1 Remote S/N
  $("#remote_sn").on('keypress',function(e){
    if(e.which == 13 && this.value != "") {
      $("#model_sn").focus();
    }
  });

  // 1.2. Model S/N Indoor
  $("#model_sn").on('keypress',function(e){
    if(e.which == 13 && this.value != "") {
      $("#sup_sn").focus();
    }
  });

  // 1.3 + 2.5 SUP S/N
$("#sup_sn").on('keypress', function(e) {
  if (e.which == 13 && this.value != "") {
    if (ldat.active != 'OUTDOOR') {
      $("#sn_evaporator").focus();
    } else {
      $("#model_sn2").focus();
    }
  }
});

  // 1.4 Evaporator S/N
$("#sn_evaporator").on('keypress', function(e) {
  if (e.which == 13 && this.value != "") {
    $("#sn_motor_indoor").focus();
  }
});

  // 1.5 Motor Indoor S/N
$("#sn_motor_indoor").on('keypress', function(e) {
  if (e.which == 13 && this.value != "") {
    $("#sn_pcb_indoor").focus();
  }
});

  // 1.6 PCB Indoor S/N
$("#sn_pcb_indoor").on('keypress', function(e) {
  if (e.which == 13 && this.value != "") {
    $("#sn_display_assembly").focus();
  }
});

  // 1.7 Display Assembly S/N
$("#sn_display_assembly").on('keypress', function(e) {
  if (e.which == 13 && this.value != "") {
    setTD();
  }
});

  // 2.1 PIPE S/N
  $("#pipe_sn").on('keypress',function(e){
    if(e.which == 13 && this.value != "") {
      $("#test_sn").focus();
    }
  });

  // 2.2 TEST S/N
  $("#test_sn").on('keypress',function(e){
    if(e.which == 13 && this.value != "") {
      $("#prop_sn").focus();
    }
  });

  // 2.3 PROP S/N
  $("#prop_sn").on('keypress',function(e){
    if(e.which == 13 && this.value != "") {
      $("#set_sn").focus();
    }
  });

  // 2.4 SET S/N
  $("#set_sn").on('keypress',function(e){
    if(e.which == 13 && this.value != "") {
      $("#sup_sn").focus();
    }
  });

  // 2.6. Model S/N Outdoor (กล่อง)
  $("#model_sn2").on('keypress',function(e){
    if(e.which == 13 && this.value != "") {
     $("#sn_compressor").focus();
    }
  });

  // 2.7. Compressor S/N
  $("#sn_compressor").on('keypress',function(e){
    if(e.which == 13 && this.value != "") {
     $("#sn_capacitor_compressor").focus();
    }
  });

  // 2.8. Capacitor Compressor S/N
  $("#sn_capacitor_compressor").on('keypress',function(e){
    if(e.which == 13 && this.value != "") {
     $("#sn_magnetic").focus();
    }
  });

  // 2.9. Magnetic S/N
  $("#sn_magnetic").on('keypress',function(e){
    if(e.which == 13 && this.value != "") {
     $("#sn_condenser").focus();
    }
  });

  // 2.10. Condenser S/N
  $("#sn_condenser").on('keypress',function(e){
    if(e.which == 13 && this.value != "") {
     $("#sn_pcb_outdoor").focus();
    }
  });

  // 2.11. PCB Board S/N
  $("#sn_pcb_outdoor").on('keypress',function(e){
    if(e.which == 13 && this.value != "") {
     $("#sn_motor_outdoor").focus();
    }
  });

  // 2.12. Outdoor Motor S/N
  $("#sn_motor_outdoor").on('keypress',function(e){
    if(e.which == 13 && this.value != "") {
      setTD();
    }
  });


  // Reset Head
  $('#btnResetHead').on('click', function(){
    $(".field-sn").prop('disabled', true);
    $('#brand,#product_id,#lot_no,#line,#mfd,#btnHead').prop('disabled', false);
    $("#divTable1").html("");
    $('#lot_no,#line').val('');
  });

  // Preset the site by get query
  if(parseInt(ldat.query.serial_id) > 0){
    ldat.cur_serial_id = ldat.query.serial_id;
  }

  ldat.firstLoad = true;
  // getList();

  // Save
	$('#btnSave').on('click', function(){
    $('#btnResetHead').click();
    return;

    // var param = {};
    // param.product_id = $("#product_id").val();
    // param.lot_no = $("#lot_no").val();
    // param.line = $("#line").val();
    // param.mfd = $("#mfd").val();
    // param.serials = JSON.stringify(ldat.set);
    //
		// if(eb.isnt('Product ID', param.product_id)
    //   && eb.isnt('Lot number or Shipment', param.lot_no)
    //   && eb.isnt('MFD', param.mfd) ) {
		// 	$('#btnSave').attr('disabled',true);
    //   console.table(param);
    //
    //   eb.post("web", "s_product_serial_fg_bulk", param, function(rt){
		// 		if(rt.ids && rt.ids.length > 0) {
    //       $('#btnResetHead').click();
    //       alert('บันทึกข้อมูลสำเร็จ');
    //     }else{
    //       alert('Failed to save.')
    //     }
    //     $('#btnSave').removeAttr('disabled');
		// 	});
		// } // end if
	});


});

function setTD(){
  if($("#divTable1 table").length == 0){
    $("#divTable1").html(`<table class="table table-bordered table-striped">
    <thead>
      <tr>
        <th class="text-center" style="width: 10px">ลำดับ</th>
        <th class="text-center">Product S/N</th>
        ${ldat.active != 'OUTDOOR' ? '<th class="text-center" style="width: 20%">Remote S/N</th><th class="text-center" style="width: 20%">SUP S/N</th><th class="text-center" style="width: 20%">Evaporator S/N</th><th class="text-center" style="width: 20%">Indoor Motor S/N</th><th class="text-center" style="width: 20%">PCB Board S/N</th><th class="text-center" style="width: 20%">Display assembly S/N</th><th class="text-center" style="width: 10px">ยกเลิก</th>'
          : '<th class="text-center">ท่อ S/N</th><th class="text-center">เทส S/N</th><th class="text-center">ใบพัด S/N</th><th class="text-center">ชุดติดตั้ง S/N</th><th class="text-center">SUP S/N</th><th class="text-center">Compressor S/N</th><th class="text-center">Capacitor Compressor S/N</th><th class="text-center">Magnetic S/N</th><th class="text-center">Condenser S/N</th><th class="text-center">PCB Board S/N</th><th class="text-center">Outdoor Motor S/N</th><th class="text-center">ยกเลิก</th>'}
      </tr>
    </thead>
    <tbody>
    </tbody></table>`);
  } // if empty

  var m = $("#model_sn" + (ldat.active == "OUTDOOR" ? '2': '') ).val();
  var r = $("#remote_sn").val();
  var p = $("#sup_sn").val();
  var ev = $("#sn_evaporator").val();
  var mo = $("#sn_motor_indoor").val();
  var pcb_in = $("#sn_pcb_indoor").val();
  var disp = $("#sn_display_assembly").val();

  var pi = $("#pipe_sn").val();
  var t = $("#test_sn").val();
  var pr = $("#prop_sn").val();
  var s = $("#set_sn").val();
  var c = $("#sn_compressor").val();     // Compressor
  var cc = $("#sn_capacitor_compressor").val(); // Capacitor Compressor
  var mg = $("#sn_magnetic").val();      // Magnetic
  var cd = $("#sn_condenser").val();     // Condenser
  var pcb_out = $("#sn_pcb_outdoor").val(); // PCB Outdoor
  var mo2 = $("#sn_motor_outdoor").val(); // Motor Outdoor

  var to_save = {};
  var i = -1;


  if(m.length > 3 && p != ""){
    if(ldat.active != 'OUTDOOR' ) to_save = {model: m, remote: r, sup: p, sn_evaporator: ev, sn_motor_indoor: mo, sn_pcb_indoor: pcb_in, sn_display_assembly: disp,  delete: 0};
    else to_save = {model: m, pipe: pi, sup: p, test: t, prop: pr, set: s, sn_compressor: c, sn_capacitor_compressor: cc, sn_magnetic: mg, sn_condenser: cd, sn_pcb_outdoor: pcb_out, sn_motor_outdoor: mo2,  delete: 0};
    ldat.set.push(to_save);
i = ldat.set.length;

let row_html = '';

if (ldat.active != 'OUTDOOR') {
  row_html = `
    <tr class="bg-warning" data-id="0" data-inx="${i}">
      <td class="text-center">${i}.</td>
      <td class="text-center">${eb.snull(m)}</td>
      <td class="text-center">${eb.snull(r)}</td>
      <td class="text-center">${eb.snull(p)}</td>
      <td class="text-center">${eb.snull(ev)}</td>
      <td class="text-center">${eb.snull(mo)}</td>
      <td class="text-center">${eb.snull(pcb_in)}</td>
      <td class="text-center">${eb.snull(disp)}</td>
      <td class="text-center">
        <button onclick="markDel(this,${i})" type="button" class="btn btn-xs btn-danger">
          <i class="fa fa-trash"></i>
        </button>
      </td>
    </tr>`;
} else {
  row_html = `
    <tr class="bg-warning" data-id="0" data-inx="${i}">
      <td class="text-center">${i}.</td>
      <td class="text-center">${eb.snull(m)}</td>
      <td class="text-center">${eb.snull(pi)}</td>
      <td class="text-center">${eb.snull(t)}</td>
      <td class="text-center">${eb.snull(pr)}</td>
      <td class="text-center">${eb.snull(s)}</td>
      <td class="text-center">${eb.snull(p)}</td>
      <td class="text-center">${eb.snull(c)}</td>
      <td class="text-center">${eb.snull(cc)}</td>
      <td class="text-center">${eb.snull(mg)}</td>
      <td class="text-center">${eb.snull(cd)}</td>
      <td class="text-center">${eb.snull(pcb_out)}</td>
      <td class="text-center">${eb.snull(mo2)}</td>
      <td class="text-center">
        <button onclick="markDel(this,${i})" type="button" class="btn btn-xs btn-danger">
          <i class="fa fa-trash"></i>
        </button>
      </td>
    </tr>`;
}

$("#divTable1 table tbody").prepend(row_html);
  }
  $("#model_sn,#model_sn2,#remote_sn,#sup_sn,#pipe_sn,#prop_sn,#test_sn,#set_sn,#sn_evaporator,#sn_motor_indoor,#sn_pcb_indoor,#sn_display_assembly,#sn_compressor,#sn_capacitor_compressor,#sn_magnetic,#sn_condenser,#sn_pcb_outdoor,#sn_motor_outdoor").val("");

  if(ldat.active != 'OUTDOOR') $("#remote_sn").focus();
  else $("#pipe_sn").focus();

  if(ldat.set.length > 0) $("#btnSave").removeAttr('disabled');

  // Save real time individually
  var param = {
    serial_no : m,
    sn_sup : p,   sn_remote : r,
    sn_pipe : pi,   sn_test : t,  sn_prop : pr,
    sn_set : s,
    sn_evaporator: ev,
    sn_motor_indoor: mo,
    sn_pcb_indoor: pcb_in,
    sn_display_assembly: disp,
    sn_compressor: c,
    sn_capacitor_compressor: cc,
    sn_magnetic: mg,
    sn_condenser: cd,
    sn_pcb_outdoor: pcb_out,
    sn_motor_outdoor: mo2,
    product_id : $("#product_id").val(),
    model_code_opt : $("#model_code_opt").val(),
    lot_no : $("#lot_no").val(),
    line : ldat.active,
    mfd : moment($("#mfd").val(), 'DD/MM/YYYY').format('YYYY-MM-DD'),
    inx : i
  };

  if(m != "" && p != ""){
    console.table(param);
    eb.post("web", "s_product_serial_fg_single", param, function(rt){
      if(rt.inx) {
        $("#divTable1 tr[data-inx="+rt.inx+"]").removeClass('bg-warning');
        if(rt.id && rt.id > 0 ) $("#divTable1 tr[data-inx="+rt.inx+"]").attr('data-id',rt.id);
      }
    });
  }
}

function markDel(el, inx){
  $(el).prop('disabled', true);
  let trEl = $(el).closest('tr');
  trEl.removeClass('bg-warning').addClass('bg-danger');
  let snid = trEl.data('id');

  if(confirm('ยืนยันลบ?') && snid > 0){
    eb.post("web", "x_product_serial", {pk_id: snid}, function(rt){
      if(rt > 0 ) trEl.remove();
    });
  }
  // ldat.set[inx].delete = 1;

}


</script>
</body>
</html>
